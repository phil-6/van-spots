<div class="spots-index">

  <div class="finder-header">
    <h1> <span class="headingBrandVan">Van</span> <span class="headingBrandSpots">Spots</span> </h1>
    <% if user_signed_in? %>
      <%= link_to "Create Spot", new_spot_path, class: 'btn btn-sm btn-primary' %>
    <% end %>
    <hr />
  </div>

  <div class="filter-buttons" id="type-filters">
    <button class="btn btn-sm active" onclick="filterByType('all')">Show All</button>
    <button class="btn btn-sm" onclick="filterByType('free_spot')">Free Spots</button>
    <button class="btn btn-sm" onclick="filterByType('paid_spot')">Paid Spots</button>
    <button class="btn btn-sm" onclick="filterByType('mtb_spot')">MTB Spots</button>
    <button class="btn btn-sm" onclick="filterByType('climbing_spot')">Climbing Spots</button>
    <button class="btn btn-sm" onclick="filterByType('kayaking_spot')">Kayaking Spots</button>
    <button class="btn btn-sm" onclick="filterByType('surf_spot')">Surf Spots</button>
    <button class="btn btn-sm" onclick="filterByType('walking_spot')">Walking Spots</button>
  </div>
  <div class="filter-buttons" id="rating-filters">
    <button class="btn btn-sm active" onclick="filterByRating('all')">All</button>
    <button class="btn btn-sm" onclick="filterByRating('5')">>5/10</button>
    <button class="btn btn-sm" onclick="filterByRating('6')">>6/10</button>
    <button class="btn btn-sm" onclick="filterByRating('7')">>7/10</button>
    <button class="btn btn-sm" onclick="filterByRating('8')">>8/10</button>
    <button class="btn btn-sm" onclick="filterByRating('9')">>9/10</button>
  </div>

  <div class="card-columns">
    <% @spots.each do |spot| %>
      <div class="card <%= spot.spot_type %> rating-<%= spot.average_rating.floor %>">
        <div class="card-header text-center" >
          <h2 class="card-title"><%= spot.name %></h2>
          <h5>
            <% if spot.spot_type == 'free_spot' %>Free Spot
            <% elsif spot.spot_type == 'paid_spot' %>Paid Spot
            <% elsif spot.spot_type == 'campsite' %>Campsite
            <% elsif spot.spot_type == 'mtb_spot' %>MTB Spot
            <% elsif spot.spot_type == 'climbing_spot' %>Climbing Spot
            <% elsif spot.spot_type == 'kayaking_spot' %>Kayaking Spot
            <% elsif spot.spot_type == 'surf_spot' %>Surf Spot
            <% elsif spot.spot_type == 'walking_spot' %>Walking Spot
            <% else %>Spot Type Unknown<% end %> - <%= spot.average_rating %>/10
          </h5>
        </div>

        <div class="card-body">
          <h6>Created By: <%= spot.user.username %> on <%= spot.created_at.strftime('%b %d, %Y') %></h6>
          <%= spot.description %>
        </div>

        <div class="more-info">
          <div class="text-center">
            <% if user_signed_in? %>
              <%= link_to "More Info", spot_path(spot) %>
            <% else %>
              <%= link_to new_user_session_path, :class => 'nav-link' do%>
                Login for More Info
              <% end %>
            <% end %>
          </div>
          <br />
        </div>

      </div>
    <% end %>
  </div>

</div>

<script>
    $( document ).on('turbolinks:load', function() {
        filterByRating('all');
        filterByType('all');
    });
</script>